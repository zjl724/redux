{"ast":null,"code":"import axios from 'axios';\nconst SET_DATA_LIST = \"SETDATALIST\";\nexport function setDataList(list) {\n  return {\n    type: SET_DATA_LIST,\n    list\n  };\n}\nexport function getDataList() {\n  return (dispatch, getState) => {\n    let result = axios.get('productList.json');\n    result.then(res => {\n      const data = res.data;\n      console.log(getState(), 'hhhhhhhhhhh');\n      const pageSize = getState().product.pageSize;\n      const current = getState().product.current;\n      const total = Math.ceil(data.length / pageSize);\n      const currentList = data.slice((current - 1) * pageSize, current * pageSize);\n      console.log(total, currentList);\n      dispatch(setDataList(data, total, currentList)); // dispatch({\n      //     type: 'SET_DATA_LIST',\n      //     list: res.data,\n      //     // num: Math.ceil(res.data.list.length / pageSize),\n      //     // data: res.data.list.slice((page - 1) * pageSize, page * pageSize),\n      // })\n    });\n  };\n} // export function addAsync() {\n//     return dispatch=>{\n//         setTimeout(() => {\n//            dispatch(add(1))  \n//         }, 2000);\n//     }\n// }\n// //操作city的action\n// export function chooseCity(city) {\n//     return {\n//         type: CITY_TYPE,\n//         city\n//     }\n// }","map":{"version":3,"sources":["/Users/aiyongtech5/Desktop/demo03/demo/src/actions/index.js"],"names":["axios","SET_DATA_LIST","setDataList","list","type","getDataList","dispatch","getState","result","get","then","res","data","console","log","pageSize","product","current","total","Math","ceil","length","currentList","slice"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,MAAMC,aAAa,GAAG,aAAtB;AAEA,OAAO,SAASC,WAAT,CAAqBC,IAArB,EAA0B;AAC7B,SAAM;AACFC,IAAAA,IAAI,EAAEH,aADJ;AAEFE,IAAAA;AAFE,GAAN;AAIH;AAED,OAAO,SAASE,WAAT,GAAuB;AAC1B,SAAO,CAACC,QAAD,EAAUC,QAAV,KAAsB;AACzB,QAAIC,MAAM,GAAGR,KAAK,CAACS,GAAN,CAAU,kBAAV,CAAb;AACAD,IAAAA,MAAM,CAACE,IAAP,CAAYC,GAAG,IAAI;AACf,YAAMC,IAAI,GAAGD,GAAG,CAACC,IAAjB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYP,QAAQ,EAApB,EAAuB,aAAvB;AACA,YAAMQ,QAAQ,GAAGR,QAAQ,GAAGS,OAAX,CAAmBD,QAApC;AACA,YAAME,OAAO,GAAGV,QAAQ,GAAGS,OAAX,CAAmBC,OAAnC;AACA,YAAMC,KAAK,GAAGC,IAAI,CAACC,IAAL,CAAUR,IAAI,CAACS,MAAL,GAAcN,QAAxB,CAAd;AACA,YAAMO,WAAW,GAAGV,IAAI,CAACW,KAAL,CAAW,CAACN,OAAO,GAAC,CAAT,IAAYF,QAAvB,EAAgCE,OAAO,GAACF,QAAxC,CAApB;AACAF,MAAAA,OAAO,CAACC,GAAR,CAAYI,KAAZ,EAAkBI,WAAlB;AACAhB,MAAAA,QAAQ,CAACJ,WAAW,CAACU,IAAD,EAAMM,KAAN,EAAYI,WAAZ,CAAZ,CAAR,CARe,CASf;AACA;AACA;AACA;AACA;AACA;AACH,KAfD;AAgBH,GAlBD;AAmBH,C,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import axios from 'axios';\r\n\r\nconst SET_DATA_LIST = \"SETDATALIST\"\r\n\r\nexport function setDataList(list){\r\n    return{\r\n        type: SET_DATA_LIST,\r\n        list\r\n    }\r\n}\r\n\r\nexport function getDataList() {\r\n    return (dispatch,getState) =>{\r\n        let result = axios.get('productList.json')\r\n        result.then(res => {\r\n            const data = res.data\r\n            console.log(getState(),'hhhhhhhhhhh')\r\n            const pageSize = getState().product.pageSize;\r\n            const current = getState().product.current;\r\n            const total = Math.ceil(data.length / pageSize)\r\n            const currentList = data.slice((current-1)*pageSize,current*pageSize)\r\n            console.log(total,currentList)\r\n            dispatch(setDataList(data,total,currentList))\r\n            // dispatch({\r\n            //     type: 'SET_DATA_LIST',\r\n            //     list: res.data,\r\n            //     // num: Math.ceil(res.data.list.length / pageSize),\r\n            //     // data: res.data.list.slice((page - 1) * pageSize, page * pageSize),\r\n            // })\r\n        })\r\n    }\r\n}\r\n\r\n// export function addAsync() {\r\n//     return dispatch=>{\r\n//         setTimeout(() => {\r\n//            dispatch(add(1))  \r\n//         }, 2000);\r\n//     }\r\n// }\r\n\r\n// //操作city的action\r\n// export function chooseCity(city) {\r\n//     return {\r\n//         type: CITY_TYPE,\r\n//         city\r\n//     }\r\n// }"]},"metadata":{},"sourceType":"module"}